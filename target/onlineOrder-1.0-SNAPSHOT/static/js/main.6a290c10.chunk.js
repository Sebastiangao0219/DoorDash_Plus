(this["webpackJsonpdoordash-app"]=this["webpackJsonpdoordash-app"]||[]).push([[0],{165:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(28),s=n.n(a),r=(n(165),n(5)),i=n(249),o=n(247),u=n(17),l=n(18),j=n(22),d=n(21),h=n(155),b=n(245),f=n(248),m=n(154),O=n(251),p=n(252),g=function(e){var t="/login?username=".concat(e.username,"&password=").concat(e.password);return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to log in")}))},x=n(11),y=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={login:!1},e.onFinish=function(t){e.setState({login:!0}),console.log("Received values of form: ",t),g(t).then((function(){h.b.success("Login Successfully"),e.props.onSuccess()})).catch((function(e){h.b.error(e.message)})).finally((function(){e.setState({loading:!1})}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(b.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish,children:[Object(x.jsx)(b.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(x.jsx)(f.a,{prefix:Object(x.jsx)(O.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(x.jsx)(b.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(x.jsx)(f.a.Password,{prefix:Object(x.jsx)(p.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(x.jsx)(b.a.Item,{children:Object(x.jsx)(m.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:this.state.loading,children:"Log in"})})]})}}]),n}(c.Component),v=y,S=n(84),w=n(76),C=n(246),F=n(244),I=n(159),k=S.a.Option,P=function(e){var t=e.itemId,n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1];return Object(x.jsx)(w.a,{title:"Add to shopping cart",children:Object(x.jsx)(m.a,{loading:s,type:"primary",icon:Object(x.jsx)(I.a,{}),onClick:function(){i(!0),function(e){return fetch("/order/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(t).then((function(){return h.b.success("Successfully add item")})).catch((function(e){return h.b.error(e.message)})).finally((function(){i(!1)}))}})})},T=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),i=Object(r.a)(s,2),o=i[0],u=i[1],l=Object(c.useState)([]),j=Object(r.a)(l,2),d=j[0],b=j[1],f=Object(c.useState)(!1),m=Object(r.a)(f,2),O=m[0],p=m[1],g=Object(c.useState)(!1),y=Object(r.a)(g,2),v=y[0],w=y[1];return Object(c.useEffect)((function(){w(!0),fetch("/restaurants").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get restaurants");return e.json()})).then((function(e){b(e)})).catch((function(e){h.b.error(e.message)})).finally((function(){w(!1)}))}),[]),Object(c.useEffect)((function(){var e;o&&(p(!0),(e=o,fetch("/restaurant/".concat(e,"/menu")).then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get menus");return e.json()}))).then((function(e){a(e)})).catch((function(e){h.b.error(e.message)})).finally((function(){p(!1)})))}),[o]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(S.a,{value:o,onSelect:function(e){return u(e)},placeholder:"Select a restaurant",loading:v,style:{width:300},onChange:function(){},children:d.map((function(e){return Object(x.jsx)(k,{value:e.id,children:e.name},e.id)}))}),o&&Object(x.jsx)(C.b,{style:{marginTop:20},loading:O,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:n,renderItem:function(e){return Object(x.jsx)(C.b.Item,{children:Object(x.jsxs)(F.a,{title:e.name,extra:Object(x.jsx)(P,{itemId:e.id}),children:[Object(x.jsx)("img",{src:e.imageUrl,alt:e.name,style:{height:"auto",width:"100%",display:"block"}}),"Price: ".concat(e.price)]})})}})]})},E=n(250),L=o.a.Text,N=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),i=Object(r.a)(s,2),o=i[0],u=i[1],l=Object(c.useState)(!1),j=Object(r.a)(l,2),d=j[0],b=j[1],f=Object(c.useState)(!1),O=Object(r.a)(f,2),p=O[0],g=O[1];Object(c.useEffect)((function(){n&&(b(!0),fetch("/cart").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to get shopping cart data");return e.json()})).then((function(e){u(e)})).catch((function(e){h.b.error(e.message)})).finally((function(){b(!1)})))}),[n]);var y=function(){a(!1)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(m.a,{type:"primary",shape:"round",onClick:function(){a(!0)},children:"Cart"}),Object(x.jsx)(E.a,{title:"My Shopping Cart",onClose:y,visible:n,width:520,footer:Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(L,{strong:!0,children:"Total price: $".concat(null===o||void 0===o?void 0:o.totalPrice)}),Object(x.jsxs)("div",{children:[Object(x.jsx)(m.a,{onClick:y,style:{marginRight:8},children:"Cancel"}),Object(x.jsx)(m.a,{onClick:function(){g(!0),fetch("/checkout").then((function(e){if(e.status<200||e.status>=300)throw Error("Fail to checkout")})).then((function(){h.b.success("Successfully checkout"),a(!1)})).catch((function(e){h.b.error(e.message)})).finally((function(){g(!1)}))},type:"primary",loading:p,disabled:d||0===(null===o||void 0===o?void 0:o.orderItemList.length),children:"Checkout"})]})]}),children:Object(x.jsx)(C.b,{loading:d,itemLayout:"horizontal",dataSource:o?o.orderItemList:[],renderItem:function(e){return console.log(e),Object(x.jsx)(C.b.Item,{children:Object(x.jsx)(C.b.Item.Meta,{title:e.menuitem.name,description:"$".concat(e.price)})})}})})]})},B=i.a.Header,H=i.a.Content,U=o.a.Title;var q=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(x.jsxs)(i.a,{style:{height:"100vh"},children:[Object(x.jsx)(B,{children:Object(x.jsxs)("div",{className:"header",style:{display:"flex",justifyContent:"space-between"},children:[Object(x.jsx)(U,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Sebastian's Yummy Land~!"}),n&&Object(x.jsx)("div",{children:Object(x.jsx)(N,{})})]})}),Object(x.jsx)(H,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(x.jsx)(T,{}):Object(x.jsx)(v,{onSuccess:function(){return a(!0)}})})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,253)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};s.a.render(Object(x.jsx)(q,{}),document.getElementById("root")),A()}},[[242,1,2]]]);
//# sourceMappingURL=main.6a290c10.chunk.js.map